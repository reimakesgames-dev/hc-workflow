name: Unit

on:
  push:

jobs:
  testing:
    name: Testing
    runs-on: ubuntu-latest
    timeout-minutes: 2
    steps:
      - name: Checkout
        uses: actions/checkout@v2.3.4

      - name: Install Roblox Studio
        uses: OrbitalOwen/roblox-win-installer-action@1.1
        with:
          cookie: ${{ secrets.ROBLOSECURITY || '_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_8D9F3A35B5541747D1705A5986E54983E65540F3887CF28ED6CCCA0D3F1C1A670BF48DB42F1EAA13FEF25CE2CC3DC1E7E3D8D091DBA0F8E0DE3D2CC37B7722785574AE434CC7178F61016C085931C03142D6CE330366C1D765CD14022CEC4D08839D52AB6B830E6C83F4ACFB74D9958A556952EDE5F387223AC1E05A35E55298892909F6EB75C0299363B18B2A6055796927085981E17A7F433099ADA692AFA2AEBC9BDA4231A8360E5930965907C3E1D3092E4E3A1A8EA8A5DD1F0867CE3CCF3D4B4A1CD664B7530D168AB2CF97F4CE050A609A0870710316ED086744C08493E6F427DE13F444B7AD8BD5D71703BE8E84663EDC55CD1FF45D3F6D063D791B372E2711AE5293A43A607629020C20287DAF420FDD6FBD46DCCE3DF4A9CBE5146EF1D4294983F44FF5EB64BECD885E1C481BF02B3E5B3A0ACB998A10A9B07CB3E205AF5C070D83E7BB31F8BA7A0E2E8B811F417CBA7F25C52D6E4DAA7CD1B122FC432AC0A1C1AC21BEB925724058EEF74052AD4075314ABD4BC4A70D652B6A513B6CDAD7AD' }}
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Install
        uses: Roblox/setup-foreman@v1
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Install Packages
        run: wally install

      - name: Build
        run: rojo build --output test.rbxmx

      - name: Run
        run: run-in-roblox --place test.rbxmx --script test.lua
